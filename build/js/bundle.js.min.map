{"version":3,"sources":["app.js"],"names":["page","appointment","name","date","time","services","startApp","showServices","showSection","changeSection","nextPage","backPage","pagersButtons","showSummary","backSection","document","querySelector","classList","remove","add","backTab","querySelectorAll","forEach","link","addEventListener","e","preventDefault","parseInt","target","dataset","step","async","result","fetch","db","json","service","id","price","nameService","createElement","textContent","priceService","serviceDiv","idService","onclick","selectService","appendChild","error","console","log","element","tagName","parentElement","contains","deleteService","addService","firstElementChild","nextElementSibling","filter","serviceObj","summaryDiv","Object","values","includes","noServices"],"mappings":"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","file":"bundle.js","sourcesContent":["let page = 1;\r\n\r\nconst appointment = {\r\n  name: \"\",\r\n  date: \"\",\r\n  time: \"\",\r\n  services: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  startApp();\r\n});\r\n\r\nfunction startApp() {\r\n  // Show Services\r\n  showServices();\r\n\r\n  // Highlights tab pressed\r\n  showSection();\r\n\r\n  // Hides or showa a section tab pressed\r\n  changeSection();\r\n\r\n  // Paging back and next\r\n  nextPage();\r\n\r\n  backPage();\r\n\r\n  // Checks the current page to hide or show the page layout\r\n  pagersButtons();\r\n\r\n  // Show quote summary or validation error\r\n  showSummary();\r\n}\r\n\r\nfunction showSection() {\r\n  // Delete show-section from previous section\r\n  const backSection = document.querySelector(\".show-section\");\r\n  if (backSection) {\r\n    backSection.classList.remove(\"show-section\");\r\n  }\r\n\r\n  const currentSection = document.querySelector(`#step-${page}`);\r\n  currentSection.classList.add(\"show-section\");\r\n\r\n  // Delete current class previous tab\r\n  const backTab = document.querySelector(\".tabs .current\");\r\n  if (backTab) {\r\n    backTab.classList.remove(\"current\");\r\n  }\r\n\r\n  // Highlight current tab\r\n  const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n  tab.classList.add(\"current\");\r\n}\r\n\r\nfunction changeSection() {\r\n  const links = document.querySelectorAll(\".tabs button\");\r\n\r\n  links.forEach((link) => {\r\n    link.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      page = parseInt(e.target.dataset.step);\r\n\r\n      // Call to function showSection();\r\n      showSection();\r\n\r\n      pagersButtons();\r\n    });\r\n  });\r\n}\r\n\r\nasync function showServices() {\r\n  try {\r\n    const result = await fetch(\"./services.json\");\r\n    const db = await result.json();\r\n\r\n    const { services } = db;\r\n\r\n    // Generate HTML\r\n    services.forEach((service) => {\r\n      const { id, name, price } = service;\r\n\r\n      // DOM Scripting\r\n      // Generate name of service\r\n      const nameService = document.createElement(\"P\");\r\n      nameService.textContent = name;\r\n      nameService.classList.add(\"name-service\");\r\n\r\n      // Generate price of service\r\n      const priceService = document.createElement(\"P\");\r\n      priceService.textContent = `$ ${price}`;\r\n      priceService.classList.add(\"price-service\");\r\n\r\n      // Generate DIV container of service\r\n      const serviceDiv = document.createElement(\"DIV\");\r\n      serviceDiv.classList.add(\"service\");\r\n      serviceDiv.dataset.idService = id;\r\n\r\n      // Select serviceDIV\r\n      serviceDiv.onclick = selectService; //event handler\r\n\r\n      // Add name and prince in a DIV\r\n      serviceDiv.appendChild(nameService);\r\n      serviceDiv.appendChild(priceService);\r\n\r\n      // Add serviceDiv in a HTML\r\n      document.querySelector(\"#services\").appendChild(serviceDiv);\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction selectService(e) {\r\n  let element;\r\n\r\n  // Force element click to DIV\r\n  if (e.target.tagName === \"P\") {\r\n    element = e.target.parentElement;\r\n  } else {\r\n    element = e.target;\r\n  }\r\n\r\n  if (element.classList.contains(\"selected\")) {\r\n    element.classList.remove(\"selected\");\r\n\r\n    const id = parseInt(element.dataset.idService);\r\n\r\n    deleteService(id);\r\n  } else {\r\n    element.classList.add(\"selected\");\r\n\r\n    const serviceObj = {\r\n      id: parseInt(element.dataset.idService),\r\n      name: element.firstElementChild.textContent,\r\n      price: element.firstElementChild.nextElementSibling.textContent,\r\n    };\r\n\r\n    addService(serviceObj);\r\n  }\r\n}\r\n\r\nfunction deleteService(id) {\r\n  const { services } = appointment;\r\n  appointment.services = services.filter((service) => service.id !== id);\r\n\r\n  console.log(appointment);\r\n}\r\n\r\nfunction addService(serviceObj) {\r\n  const { services } = appointment;\r\n\r\n  appointment.services = [...services, serviceObj];\r\n  console.log(appointment);\r\n}\r\n\r\nfunction nextPage() {\r\n  const nextPage = document.querySelector(\"#next\");\r\n  nextPage.addEventListener(\"click\", () => {\r\n    page++;\r\n    console.log(page);\r\n\r\n    pagersButtons();\r\n  });\r\n}\r\n\r\nfunction backPage() {\r\n  const backPage = document.querySelector(\"#back\");\r\n  backPage.addEventListener(\"click\", () => {\r\n    page--;\r\n    console.log(page);\r\n\r\n    pagersButtons();\r\n  });\r\n}\r\n\r\nfunction pagersButtons() {\r\n  const nextPage = document.querySelector(\"#next\");\r\n  const backPage = document.querySelector(\"#back\");\r\n\r\n  if (page === 1) {\r\n    backPage.classList.add(\"hide\");\r\n  } else if (page === 3) {\r\n    nextPage.classList.add(\"hide\");\r\n    backPage.classList.remove(\"hide\");\r\n  } else {\r\n    backPage.classList.remove(\"hide\");\r\n    nextPage.classList.remove(\"hide\");\r\n  }\r\n\r\n  showSection(); // Change section to show page\r\n}\r\n\r\nfunction showSummary() {\r\n  // Destructuring\r\n  const { name, date, time, services } = appointment;\r\n\r\n  // Select Summary\r\n  const summaryDiv = document.querySelector(\".content-summary\");\r\n\r\n  // Object validation\r\n\r\n  if (Object.values(appointment).includes(\"\")) {\r\n    const noServices = document.createElement(\"P\");\r\n    noServices.textContent = \"Service data are missing, time, date or name\";\r\n\r\n    noServices.classList.add(\"invalidate-appointment\");\r\n\r\n    // Add to summaryDiv\r\n    summaryDiv.appendChild(noServices);\r\n  }\r\n}\r\n"]}