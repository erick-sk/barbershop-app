{"version":3,"sources":["app.js"],"names":["page","appointment","name","date","time","services","startApp","showServices","showSection","changeSection","nextPage","backPage","pagersButtons","showSummary","nameAppointment","dateAppointment","disablePreviousDays","timeAppointment","backSection","document","querySelector","classList","remove","add","backTab","querySelectorAll","forEach","link","addEventListener","e","preventDefault","parseInt","target","dataset","step","async","result","fetch","db","json","service","id","price","nameService","createElement","textContent","priceService","serviceDiv","idService","onclick","selectService","appendChild","error","console","log","element","tagName","parentElement","contains","deleteService","addService","firstElementChild","nextElementSibling","filter","serviceObj","summaryDiv","firstChild","removeChild","Object","values","includes","noServices","headingAppointment","innerHTML","servicesAppointment","headingServices","containerService","textService","nameText","value","trim","length","showAlert","alert","message","type","setTimeout","dateInput","day","Date","getUTCDay","inputDate","dateDisable","toISOString","split","min","inputTime"],"mappings":"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","file":"bundle.js","sourcesContent":["let page = 1;\r\n\r\nconst appointment = {\r\n  name: \"\",\r\n  date: \"\",\r\n  time: \"\",\r\n  services: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  startApp();\r\n});\r\n\r\nfunction startApp() {\r\n  // Show Services\r\n  showServices();\r\n\r\n  // Highlights tab pressed\r\n  showSection();\r\n\r\n  // Hides or showa a section tab pressed\r\n  changeSection();\r\n\r\n  // Paging back and next\r\n  nextPage();\r\n\r\n  backPage();\r\n\r\n  // Checks the current page to hide or show the page layout\r\n  pagersButtons();\r\n\r\n  // Show quote summary or validation error\r\n  showSummary();\r\n\r\n  // Stores the name of the date in the object\r\n  nameAppointment();\r\n\r\n  // Stores the date of the date in the object\r\n  dateAppointment();\r\n\r\n  // Disable past days\r\n  disablePreviousDays();\r\n\r\n  // Stores the time of the date in the object\r\n  timeAppointment();\r\n}\r\n\r\nfunction showSection() {\r\n  // Delete show-section from previous section\r\n  const backSection = document.querySelector(\".show-section\");\r\n  if (backSection) {\r\n    backSection.classList.remove(\"show-section\");\r\n  }\r\n\r\n  const currentSection = document.querySelector(`#step-${page}`);\r\n  currentSection.classList.add(\"show-section\");\r\n\r\n  // Delete current class previous tab\r\n  const backTab = document.querySelector(\".tabs .current\");\r\n  if (backTab) {\r\n    backTab.classList.remove(\"current\");\r\n  }\r\n\r\n  // Highlight current tab\r\n  const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n  tab.classList.add(\"current\");\r\n}\r\n\r\nfunction changeSection() {\r\n  const links = document.querySelectorAll(\".tabs button\");\r\n\r\n  links.forEach((link) => {\r\n    link.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      page = parseInt(e.target.dataset.step);\r\n\r\n      // Call to function showSection();\r\n      showSection();\r\n\r\n      pagersButtons();\r\n    });\r\n  });\r\n}\r\n\r\nasync function showServices() {\r\n  try {\r\n    const result = await fetch(\"./services.json\");\r\n    const db = await result.json();\r\n\r\n    const { services } = db;\r\n\r\n    // Generate HTML\r\n    services.forEach((service) => {\r\n      const { id, name, price } = service;\r\n\r\n      // DOM Scripting\r\n      // Generate name of service\r\n      const nameService = document.createElement(\"P\");\r\n      nameService.textContent = name;\r\n      nameService.classList.add(\"name-service\");\r\n\r\n      // Generate price of service\r\n      const priceService = document.createElement(\"P\");\r\n      priceService.textContent = `$ ${price}`;\r\n      priceService.classList.add(\"price-service\");\r\n\r\n      // Generate DIV container of service\r\n      const serviceDiv = document.createElement(\"DIV\");\r\n      serviceDiv.classList.add(\"service\");\r\n      serviceDiv.dataset.idService = id;\r\n\r\n      // Select serviceDIV\r\n      serviceDiv.onclick = selectService; //event handler\r\n\r\n      // Add name and prince in a DIV\r\n      serviceDiv.appendChild(nameService);\r\n      serviceDiv.appendChild(priceService);\r\n\r\n      // Add serviceDiv in a HTML\r\n      document.querySelector(\"#services\").appendChild(serviceDiv);\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction selectService(e) {\r\n  let element;\r\n\r\n  // Force element click to DIV\r\n  if (e.target.tagName === \"P\") {\r\n    element = e.target.parentElement;\r\n  } else {\r\n    element = e.target;\r\n  }\r\n\r\n  if (element.classList.contains(\"selected\")) {\r\n    element.classList.remove(\"selected\");\r\n\r\n    const id = parseInt(element.dataset.idService);\r\n\r\n    deleteService(id);\r\n  } else {\r\n    element.classList.add(\"selected\");\r\n\r\n    const serviceObj = {\r\n      id: parseInt(element.dataset.idService),\r\n      name: element.firstElementChild.textContent,\r\n      price: element.firstElementChild.nextElementSibling.textContent,\r\n    };\r\n\r\n    addService(serviceObj);\r\n  }\r\n}\r\n\r\nfunction deleteService(id) {\r\n  const { services } = appointment;\r\n  appointment.services = services.filter((service) => service.id !== id);\r\n\r\n  console.log(appointment);\r\n}\r\n\r\nfunction addService(serviceObj) {\r\n  const { services } = appointment;\r\n\r\n  appointment.services = [...services, serviceObj];\r\n  console.log(appointment);\r\n}\r\n\r\nfunction nextPage() {\r\n  const nextPage = document.querySelector(\"#next\");\r\n  nextPage.addEventListener(\"click\", () => {\r\n    page++;\r\n    console.log(page);\r\n\r\n    pagersButtons();\r\n  });\r\n}\r\n\r\nfunction backPage() {\r\n  const backPage = document.querySelector(\"#back\");\r\n  backPage.addEventListener(\"click\", () => {\r\n    page--;\r\n    console.log(page);\r\n\r\n    pagersButtons();\r\n  });\r\n}\r\n\r\nfunction pagersButtons() {\r\n  const nextPage = document.querySelector(\"#next\");\r\n  const backPage = document.querySelector(\"#back\");\r\n\r\n  if (page === 1) {\r\n    backPage.classList.add(\"hide\");\r\n  } else if (page === 3) {\r\n    nextPage.classList.add(\"hide\");\r\n    backPage.classList.remove(\"hide\");\r\n\r\n    showSummary(); // Page 3, load summary appointment\r\n  } else {\r\n    backPage.classList.remove(\"hide\");\r\n    nextPage.classList.remove(\"hide\");\r\n  }\r\n\r\n  showSection(); // Change section to show page\r\n}\r\n\r\nfunction showSummary() {\r\n  // Destructuring\r\n  const { name, date, time, services } = appointment;\r\n\r\n  // Select Summary\r\n  const summaryDiv = document.querySelector(\".content-summary\");\r\n\r\n  // Clean HTML previous\r\n  while (summaryDiv.firstChild) {\r\n    summaryDiv.removeChild(summaryDiv.firstChild);\r\n  }\r\n\r\n  // Object validation\r\n  if (Object.values(appointment).includes(\"\")) {\r\n    const noServices = document.createElement(\"P\");\r\n    noServices.textContent = \"Service data are missing, time, date or name\";\r\n\r\n    noServices.classList.add(\"invalidate-appointment\");\r\n\r\n    // Add to summaryDiv\r\n    summaryDiv.appendChild(noServices);\r\n\r\n    return;\r\n  }\r\n\r\n  const headingAppointment = document.createElement(\"H3\");\r\n  headingAppointment.textContent = \"Summary Appointment\";\r\n\r\n  // Show summary\r\n  const nameAppointment = document.createElement(\"P\");\r\n  nameAppointment.innerHTML = `<span>Name:</span> ${name}`;\r\n\r\n  const dateAppointment = document.createElement(\"P\");\r\n  dateAppointment.innerHTML = `<span>Date:</span> ${date}`;\r\n\r\n  const timeAppointment = document.createElement(\"P\");\r\n  timeAppointment.innerHTML = `<span>Time:</span> ${time}`;\r\n\r\n  const servicesAppointment = document.createElement(\"DIV\");\r\n  servicesAppointment.classList.add(\"summary-services\");\r\n\r\n  const headingServices = document.createElement(\"H3\");\r\n  headingServices.textContent = \"Details Services\";\r\n\r\n  servicesAppointment.appendChild(headingServices);\r\n\r\n  // Iteration on services array\r\n  services.forEach((service) => {\r\n    const { name, price } = service;\r\n    const containerService = document.createElement(\"DIV\");\r\n    containerService.classList.add(\"container-service\");\r\n\r\n    const textService = document.createElement(\"P\");\r\n    textService.textContent = name;\r\n\r\n    const priceService = document.createElement(\"P\");\r\n    priceService.textContent = price;\r\n    priceService.classList.add(\"price\");\r\n\r\n    // Insert text and price in DIV\r\n    containerService.appendChild(textService);\r\n    containerService.appendChild(priceService);\r\n\r\n    servicesAppointment.appendChild(containerService);\r\n  });\r\n  summaryDiv.appendChild(headingAppointment);\r\n  summaryDiv.appendChild(nameAppointment);\r\n  summaryDiv.appendChild(dateAppointment);\r\n  summaryDiv.appendChild(timeAppointment);\r\n\r\n  summaryDiv.appendChild(servicesAppointment);\r\n}\r\n\r\nfunction nameAppointment() {\r\n  const nameInput = document.querySelector(\"#name\");\r\n\r\n  nameInput.addEventListener(\"input\", (e) => {\r\n    const nameText = e.target.value.trim();\r\n\r\n    // Validate name exist\r\n    if (nameText === \"\" || nameText.length < 3) {\r\n      showAlert(\"Name no validate\", \"error\");\r\n    } else {\r\n      const alert = document.querySelector(\".alert\");\r\n      if (alert) {\r\n        alert.remove();\r\n      }\r\n      appointment.name = nameText;\r\n    }\r\n  });\r\n}\r\n\r\nfunction showAlert(message, type) {\r\n  // If an alert already exists, don't create another one\r\n  const backAlert = document.querySelector(\".alert\");\r\n  if (backAlert) {\r\n    return;\r\n  }\r\n\r\n  const alert = document.createElement(\"DIV\");\r\n  alert.textContent = message;\r\n  alert.classList.add(\"alert\");\r\n\r\n  if (type == \"error\") {\r\n    alert.classList.add(\"error\");\r\n  }\r\n\r\n  // Insert in HTML\r\n  const form = document.querySelector(\".form\");\r\n  form.appendChild(alert);\r\n\r\n  // Delete alert on time 3 seconds\r\n\r\n  setTimeout(() => {\r\n    alert.remove();\r\n  }, 3000);\r\n}\r\n\r\nfunction dateAppointment() {\r\n  const dateInput = document.querySelector(\"#date\");\r\n  dateInput.addEventListener(\"input\", (e) => {\r\n    const day = new Date(e.target.value).getUTCDay();\r\n\r\n    if ([0, 6].includes(day)) {\r\n      e.preventDefault();\r\n      dateInput.value = \"\";\r\n      showAlert(\"Day Close\", \"error\");\r\n    } else {\r\n      appointment.date = dateInput.value;\r\n      console.log(appointment);\r\n    }\r\n  });\r\n}\r\n\r\nfunction disablePreviousDays() {\r\n  const inputDate = document.querySelector(\"#date\");\r\n\r\n  // const dateNow = new Date();\r\n  // const year = dateNow.getFullYear();\r\n  // const month = dateNow.getMonth() + 1;\r\n  // const day = dateNow.getDate() + 1;\r\n\r\n  // Format YYYY-MM-DD\r\n\r\n  // const dateDisable = `${year}-${month}-${day}`;\r\n\r\n  const dateDisable = new Date().toISOString().split(\"T\")[0]; // Solution '2020-3-3' => '2020-03-03'\r\n\r\n  inputDate.min = dateDisable;\r\n}\r\n\r\nfunction timeAppointment() {\r\n  const inputTime = document.querySelector(\"#time\");\r\n  inputTime.addEventListener(\"input\", (e) => {\r\n    const timeAppointment = e.target.value;\r\n    const time = timeAppointment.split(\":\");\r\n\r\n    if (time[0] < 10 || time[0] > 18) {\r\n      showAlert(\"Time fail\", \"error\");\r\n      setTimeout(() => {\r\n        inputTime.value = \"\";\r\n      }, 2000);\r\n    } else {\r\n      appointment.time = timeAppointment;\r\n      console.log(appointment);\r\n    }\r\n  });\r\n}\r\n"]}